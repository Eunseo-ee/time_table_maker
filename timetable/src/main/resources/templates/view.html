<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="header.css" />
  <link rel="stylesheet" href="table.css" />
  <title>에브리타임</title>
  <link rel="icon" href="https://play-lh.googleusercontent.com/0oDBGRaLXdz92kZGHpCNts6KQUr38rG4uCTrV8_32WEyMy70tzC5CM5KbPk3yFoVrwM"/>
</head>
<body>

<header>
  <div class="container">

    <div class="logo">
      <img
              src="https://play-lh.googleusercontent.com/0oDBGRaLXdz92kZGHpCNts6KQUr38rG4uCTrV8_32WEyMy70tzC5CM5KbPk3yFoVrwM"
      />
      <p>
        <span>에브리타임</span>
        <span>서울과기대</span>
      </p>
    </div>

    <div class="menu">
      <ul>
        <li><a href="/">게시판</a></li>
        <li>
          <a href="https://web-develop-uxcio.run.goorm.site/Web_develop/EVERYTIMECLONE/HTML.html">시간표</a>
        </li>
        <li><a href="/">강의실</a></li>
        <li><a href="/">학점계산기</a></li>
        <li><a href="/">친구</a></li>
        <li><a href="/">책방</a></li>
        <li><a href="/">캠퍼스픽</a></li>
      </ul>
    </div>
    <div class="icon">
      <img src="https://cdn-icons-png.flaticon.com/512/1159/1159740.png" />
      <img src="https://cdn-icons-png.flaticon.com/512/66/66933.png" />
    </div>
  </div>
</header>

<main>
  <div class="container1">
    <aside>
      <form class="select">
        <select id="semesters"
        ><option>2024년 겨울학기</option
        ><option>2024년 2학기</option>
        </select>
      </form>
      <div class="current"> //현재 시간표에 대한 부분
        <p>시간표 1</p>
      </div>
      <div class="choice"> //시간표를 선택할 수 있는 부분
        <ul>
          <a href=''><li><span>시간표1</span></li></a>
          <a href=''><li><span>시간표2</span></li></a>
          <a href=''><li><span>시간표3</span></li></a>
          <a href=''><li><span>
							새 시간표 만들기
							</span></li></a>
        </ul>
      </div>
    </aside>
    <table>
      <colgroup>
        <col class="col1" />
        <col class="col2" />
        <col class="col3" />
        <col class="col4" />
        <col class="col5" />
        <col class="col6" />
        <col class="col7" />
      </colgroup>
      <tr class="thead">
        <td></td>
        <td>월</td>
        <td>화</td>
        <td>수</td>
        <td>목</td>
        <td>금</td>
      </tr>
      <tr>
        <td>1교시</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>2교시</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>3교시</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>4교시</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>5교시</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>6교시</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>7교시</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
  </div>

  <button id="toggleListButton">강의 목록 열기</button>
  <div class="list">
    <!-- 강의 목록을 보여주는 부분 -->
    <div class="head">
      <div class="search-options">
        <label for="department">과 선택:</label>
        <select id="department">
          <option value="">전체</option>
          <option value="기계시스템디자인공학과">기계시스템디자인공학과</option>
          <option value="기계자동차공학과">기계자동차공학과</option>
          <option value="안전공학과">안전공학과</option>
          <option value="신소재공학과">신소재공학과</option>
          <option value="건설시스템공학과">건설시스템공학과</option>
          <option value="건축공학전공">건축공학전공</option>
          <option value="건축학전공">건축학전공</option>
          <option value="반도체융합공학전공">반도체융합공학전공</option>
          <option value="전기정보공학과">전기정보공학과</option>
          <option value="컴퓨터공학과">컴퓨터공학과</option>
          <option value="스마트ICT융합공학과">스마트ICT융합공학과</option>
          <option value="전자공학과">전자공학과</option>
          <option value="IT융합소프트웨어전공">IT융합소프트웨어전공</option>
          <option value="화공생명공학과">화공생명공학과</option>
          <option value="환경공학과">환경공학과</option>
          <option value="식품생명공학과">식품생명공학과</option>
          <option value="정밀화학과">정밀화학과</option>
          <option value="스포츠과학과">스포츠과학과</option>
          <option value="안경광학과">안경광학과</option>
          <option value="조형대학">조형대학</option>
          <option value="시각디자인전공">시각디자인전공</option>
          <option value="산업디자인전공">산업디자인전공</option>
          <option value="도예학과">도예학과</option>
          <option value="금속공예디자인학과">금속공예디자인학과</option>
          <option value="조형예술학과">조형예술학과</option>
          <option value="영어영문학과">영어영문학과</option>
          <option value="행정학과">행정학과</option>
          <option value="문예창작학과">문예창작학과</option>
          <option value="한국문화전공">한국문화전공</option>
          <option value="산업정보시스템전공">산업정보시스템전공</option>
          <option value="ITM전공">ITM전공</option>
          <option value="경영학전공">경영학전공</option>
          <option value="글로벌테크노경영전공">글로벌테크노경영전공</option>
          <option value="MSDE학과">MSDE학과</option>
          <option value="빅데이터경영공학전공">빅데이터경영공학전공</option>
          <option value="창업융합전공">창업융합전공</option>
          <option value="지식재산기술경영전공">지식재산기술경영전공</option>
          <option value="미래융합대학">미래융합대학</option>
          <option value="융합기계공학과">융합기계공학과</option>
          <option value="헬스피트니스학과">헬스피트니스학과</option>
          <option value="건설환경융합공학과">건설환경융합공학과</option>
          <option value="문화예술학과">문화예술학과</option>
          <option value="영어과">영어과</option>
          <option value="벤처경영학과">벤처경영학과</option>
          <option value="정보통신융합공학과">정보통신융합공학과</option>
          <option value="미래에너지융합학과">미래에너지융합학과</option>
          <option value="지능형반도체공학과">지능형반도체공학과</option>
          <option value="인공지능응용학과">인공지능응용학과</option>
          <option value="창업교육센터">창업교육센터</option>
          <option value="국제교류처">국제교류처</option>
          <option value="교양대학">교양대학</option>
          <option value="글로벌기초교육학부">글로벌기초교육학부</option>
          <option value="글로벌한국어문화학부">글로벌한국어문화학부</option>

        </select>

        <label for="division">이수구분:</label>
        <select id="division">
          <option value="">전체</option>
          <option value="교필">교필</option>
          <option value="기필">기필</option>
          <option value="전필">전필</option>
          <option value="전선">전선</option>
        </select>

        <label for="credit">학점 선택:</label>
        <select id="credit">
          <option value="">전체</option>
          <option value="1">1학점</option>
          <option value="2">2학점</option>
          <option value="3">3학점</option>
          <option value="4">4학점</option>
          <option value="6">6학점</option>
          <option value="12">12학점</option>
        </select>

        <label for="search-option">검색 항목 선택:</label>
        <select id="search-option">
          <option value="courseName">과목명</option>
          <option value="professorName">교수명</option>
          <option value="courseCode">과목코드</option>
          <option value="classroom">강의실</option>
        </select>

        <label for="search-query">검색어 입력:</label>
        <input type="text" id="search-query" placeholder="검색어를 입력하세요" />

        <button id="searchButton">검색</button>
      </div>
      <!-- 태그 정보가 있는 부분 -->
      <div class="tag">
        <div>과</div>
        <div>과목명</div>
        <div>이수구분</div>
        <div>담당교수</div>
        <div>학점</div>
        <div>시간</div>
        <div>강의실</div>
        <div>수강정원</div>
      </div>
    </div>

    <div class="body">
      <!-- 강의 데이터를 반복적으로 출력 -->
      <ul id="mainList">
        <li th:each="course : ${courses}">
          <div th:text="${course.departmentName}">과</div>
          <div th:text="${course.courseName}">과목명</div>
          <div th:text="${course.division}">이수구분</div>
          <div th:text="${course.professorName}">담당교수</div>
          <div th:text="${course.credit}">학점</div>
          <div th:text="${course.dayOfWeek} + ' ' +${course.start_period} + '-' + ${courses.end_period}">시간</div>
          <div th:text="${course.classroom}">강의실</div>
          <div th:text="${course.capacity}">수강정원</div>
        </li>
      </ul>
    </div>
  </div>
</main>
<script>
  // Flex box 스타일을 저장하는 배열
  const flexBox = [1, 1, 0.5, 0.5, 0.5, 0.3, 0.5, 0.5, 4, 0.5];

  // Toggle button과 mainList 요소를 가져옴
  const toggleButton = document.getElementById('toggleListButton');
  const list = document.querySelector('.list');
  const mainList = document.getElementById('mainList');

  // Toggle button 클릭 시 리스트 표시/숨기기
  toggleButton.addEventListener('click', function () {
    if (list.style.display === 'none' || list.style.display === '') {
      list.style.display = 'block';
      toggleButton.textContent = '강의 목록 닫기';
      loadList(); // 리스트를 불러오는 함수 호출
    } else {
      list.style.display = 'none';
      toggleButton.textContent = '강의 목록 열기';
    }
  });

  // 서버에서 데이터를 가져와서 리스트를 만드는 함수
  function loadList() {
    // Fetch API를 사용해 서버에서 강의 데이터를 가져옴
    fetch('http://localhost:8080/courses/list')
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok ' + response.statusText);
              }
              return response.json();
            })
            .then(data => {
              console.log('Fetched data:', data);  // 데이터를 콘솔에 출력해 확인
              makeList(data); // 데이터를 받아와 리스트 생성
            })
            .catch(error => console.error('Error fetching data:', error));
  }

  // 리스트를 동적으로 만드는 함수
  function makeList(data) {
    // 기존 리스트 초기화
    mainList.innerHTML = '';

    // 데이터를 순회하며 리스트를 동적으로 생성
    for (let j = 0; j < data.length; j++) {
      const list = document.createElement('li');
      const course = data[j]; // 현재 강의 데이터

      // 각 속성에 맞게 div 요소를 생성
      const attributes = [
        course.departmentName,     // 과
        course.courseName,       // 과목명
        course.division,         // 이수구분
        course.professorName,    // 담당교수
        course.credit,           // 학점
        `${course.dayOfWeek} ${course.start_period}-${course.end_period}`,  // 시간
        course.classroom,        // 강의실
        course.capacity          // 수강정원
      ];

      // 각 속성을 flexBox에 맞게 div 요소로 변환
      attributes.forEach((attribute, i) => {
        const div = document.createElement('div');
        div.innerHTML = attribute ? attribute : ''; // 값이 있으면 출력, 없으면 빈 문자열
        div.style.flex = flexBox[i]; // flex 스타일 적용
        list.appendChild(div); // 리스트에 추가
      });

      mainList.appendChild(list); // mainList에 리스트 추가
    }
  }
</script>

</body>
</html>